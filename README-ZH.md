## 简介

对于有大量查询的场景，一般需要建立索引来优化查询性能：
* 建立索引来优化对数据仓库的数据检索。
* 对于策略引擎、广告引擎和实验平台引擎里，建立索引优化对预制定向策略和检索。

>本项目主要优化对定向条件的检索。

![avatar](https://github.com/boostlearn/go-kd-segment-tree/raw/master/doc/index_common.png)

数据索引是对数据点的范围检索，常见索引基于BTree,B+Tree, R-Tree, KD-Tree, Radix-Tree等数据结构来实现。
这些树状索引的基本的原理都是通过设计分割超平面来一步步缩小查询范围来实现快速查询。

![avatar](https://github.com/boostlearn/go-kd-segment-tree/raw/master/doc/point_index.png)

对于定向条件检索的情景，也可以通过切割平面来建立索引。
切割超平面可能无法实现区域的完整切割，本项目把不能切割的区间单独归属一个查询分支来处理，取得不错效果。

![avatar](https://github.com/boostlearn/go-kd-segment-tree/raw/master/doc/segment_index.png)

## 性能

**10维离散空间选10个**
>每离散空间可选值100个

|定向查询数目|无索引QPS|有索引QPS|加速比|
|----|----|---|----|
|100|80998|485201|6|
|1000|7767|427899|55|
|10000|704|239578|340|
|100000|25|201207|8140|

**5维数值空间选5个**

|定向查询数目|无索引QPS|有索引QPS|加速比|
|----|----|---|----|
|100|93110|270197|3|
|1000|8904|162522|18|
|10000|863|90926|105|
|100000|43|49111|1153|

**5维数值空间选3个，20维离散空间选5个**

|定向查询数目|无索引QPS|有索引QPS|加速比|
|----|----|---|----|
|100|69842|173792|2|
|1000|6313|88660|14|
|10000|482|43420|90|
|100000|17|24226|1399|

## 示例
