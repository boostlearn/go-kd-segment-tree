## 简介

对于有大量查询的场景一般需要建立索引来优化查询性能。
在数据仓库里，通过建立索引来优化查询数据。
在一些策略引擎、广告引擎或流量实验系统中，还需要建立索引来优化从数据点查询满足预制条件的定向策略。本项目主要针对第二种场景。

![avatar](https://github.com/boostlearn/go-kd-segment-tree/raw/master/doc/index_common.png)

对于数据点的索引，常见索引包括BTree,B+Tree, R-Tree, KD-Tree, Radix-Tree等。
这些索引基本的原理都是通过切割平面来缩小查询范围和加快查询速度。

![avatar](https://github.com/boostlearn/go-kd-segment-tree/raw/master/doc/point_index.png)

定向条件检索的索引也可以通过切割平面来建立索引，但会碰到区域无法按照切割超平面完全切割开的情况。
本项目针对这些无法切割的区域做出另外处理，切割的效果得到了保证。

![avatar](https://github.com/boostlearn/go-kd-segment-tree/raw/master/doc/segment_index.png)

## 性能

### 10维离散空间选10个
>每离散空间可选值100个

|定向查询数目|无索引QPS|有索引QPS|加速比|
|----|----|---|----|
|100|80998|485201|6|
|1000|7767|427899|55|
|10000|704|239578|340|
|100000|25|201207|8140|

### 5维数值空间选5个

|定向查询数目|无索引QPS|有索引QPS|加速比|
|----|----|---|----|
|100|93110|270197|3|
|1000|8904|162522|18|
|10000|863|90926|105|
|100000|43|49111|1153|

### 5维数值空间选3个，20维离散空间选5个

|定向查询数目|无索引QPS|有索引QPS|加速比|
|----|----|---|----|
|100|69842|173792|2|
|1000|6313|88660|14|
|10000|482|43420|90|
|100000|17|24226|1399|

## 示例
